"<html><head>\r\n<title>{HOST_NAME}</title>\r\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\r\n</head><body>\r\n  <hr>\r\n  <div id=\"title\" style=\"text-align:center;color:magenta;\"></div>\r\n  <hr>\r\n  <textarea id=\"command\" style=\"width:100%;height:50px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;\" autofocus></textarea>\r\n  <hr>\r\n  <div id=\"display\" style=\"width:100%;height:auto;overflow:auto;\"></div>\r\n  <script>\r\n    var hostname = document.title;\r\n    var command = document.getElementById(\"command\");\r\n    var display = document.getElementById(\"display\");\r\n\r\n    document.getElementById(\"title\").innerHTML = document.title;\r\n\r\n    command.onkeypress = function(k) {\r\n      if (k.keyCode === \"\\r\".charCodeAt()) { // New Line\r\n        k.preventDefault();\r\n        console.log(\"Command: \" + command.value);\r\n        printToDisplay(command.value, \"blue\");\r\n\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.onload = function() {\r\n          console.log(\"Response: \" + this.responseText);\r\n          printToDisplay(this.responseText, \"green\");\r\n        };\r\n\r\n        xmlhttp.open(\"GET\", \"/command?eval=\" + command.value);\r\n        xmlhttp.send();\r\n        command.value = \"\";\r\n      } else if (k.keyCode === \"\\n\".charCodeAt()) { // Ctrl + Enter\r\n        k.preventDefault();\r\n        command.value += \"\\n\";\r\n      }\r\n    }\r\n\r\n    function printToDisplay(message, color) {\r\n      var pre = document.createElement(\"p\");\r\n      pre.style.color = color;\r\n      pre.style.wordWrap = \"break-word\";\r\n      pre.innerHTML = message.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br />\") + \"<hr>\";\r\n      display.insertBefore(pre, display.firstChild);\r\n    }\r\n\r\n    function changeFavicon(src) {\r\n      var link = document.createElement(\"link\");\r\n      link.id = \"dynamic-favicon\";\r\n      link.rel = \"icon\";\r\n      link.href = src + \"?=\" + Date.now();\r\n\r\n      var oldLink = document.getElementById(\"dynamic-favicon\");\r\n      if (oldLink) {\r\n        document.head.removeChild(oldLink);\r\n      }\r\n\r\n      document.head.appendChild(link);\r\n    }\r\n\r\n    changeFavicon(\"favicon.ico\");\r\n  </script>\r\n</body></html>\r\n"